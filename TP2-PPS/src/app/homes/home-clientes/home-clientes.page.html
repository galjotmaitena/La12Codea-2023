<ion-content class="container-gral" *ngIf="!abierta"  style="min-height: 100vh;">
  <ion-toolbar *ngIf="!abrirChat" class="ion-no-border" style="--background:#F6BD60; text-align: center; color: black;">
    <!-- <ion-icon class="iconFooter" name="person-outline"></ion-icon> -->
    <h1 *ngIf="enMesa">${{importe}} - Tiempo: {{totalTiempo}} mins</h1>
  </ion-toolbar>

  <ion-fab *ngIf="!abrirChat" horizontal="start" vertical="bottom">
       <ion-fab-button (click)="startScan()">          <!--    ESTA MODIF      -->
      <ion-icon name="qr-code-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <div *ngIf="ingreso && !enMesa">                              <!-- escaneo ingreso, funcionalidad 3 y 4 -->
    <label *ngIf="cliente.mesa != ''">Su mesa asignada es la n√∫mero {{cliente.mesa}}</label>
    <label *ngIf="cliente.espera">Usted se encuentra en lista de espera...</label>
    <div style="background-color: #fff; position: relative; display: flex;">
    <label>encuestas</label>
    </div>
  </div>
  
  <div *ngIf="enMesa">                      <!-- escaneo mesa, funcionalidad 6 y 7 -->
    <ion-segment *ngIf="!abrirChat && !yaPidio" vertical="bottom" slot="bottom" [(ngModel)]="selectedTab">
      <ion-segment-button class="segment-button" value="tab1">COMIDAS</ion-segment-button>
      <ion-segment-button class="segment-button" value="tab2">BEBIDAS</ion-segment-button>
      <ion-segment-button class="segment-button" value="tab3">POSTRES</ion-segment-button>
    </ion-segment>

    <div *ngIf="!abrirChat && !yaPidio">
      <div *ngIf="selectedTab === 'tab1'" >
        <div *ngFor="let p of listaProductos">
          <div *ngIf="p.tipo == 'comida'" class="contenedor-productos">
            <div>
              <h1>{{p.nombre}}</h1>
            </div>
            <div>
              <swiper-container navigation="true" pagination="true" loop="true" class="py-2">
                <swiper-slide>
                  <img [src]="p.fotos[0]">
                </swiper-slide>  
                <swiper-slide>
                  <img [src]="p.fotos[1]">
                </swiper-slide> 
                <swiper-slide>
                  <img [src]="p.fotos[2]">
                </swiper-slide> 
              </swiper-container>
            </div>
            <div>
              <h3>${{p.precio}} - Tiempo de elaboracion: {{p.tiempo}} mins</h3>
            </div>
            <div>
              <ion-button (click)="elegirProducto(true, p)"><ion-icon name="add-outline"></ion-icon></ion-button>
              <ion-button (click)="elegirProducto(false, p)"><ion-icon name="remove-outline"></ion-icon></ion-button>
            </div>
          </div>
        </div>
      </div>
  
      <div *ngIf="selectedTab === 'tab2'" >
        <div *ngFor="let p of listaProductos">
          <div *ngIf="p.tipo == 'bebida'" class="contenedor-productos">
            <div>
              <h1>{{p.nombre}}</h1>
            </div>
            <div>
              <swiper-container navigation="true" pagination="true" loop="true" class="py-2">
                <swiper-slide>
                  <img [src]="p.fotos[0]">
                </swiper-slide>  
                <swiper-slide>
                  <img [src]="p.fotos[1]">
                </swiper-slide> 
                <swiper-slide>
                  <img [src]="p.fotos[2]">
                </swiper-slide> 
              </swiper-container>
            </div>
            <div>
              <h3>${{p.precio}} - Tiempo de elaboracion: {{p.tiempo}} mins</h3>
            </div>
            <div>
              <ion-button (click)="elegirProducto(true, p)"><ion-icon name="add-outline"></ion-icon></ion-button>
              <ion-button (click)="elegirProducto(false, p)"><ion-icon name="remove-outline"></ion-icon></ion-button>
            </div>
          </div>
        </div>
      </div>
  
      <div *ngIf="selectedTab === 'tab3'" >
        <div *ngFor="let p of listaProductos">
          <div *ngIf="p.tipo == 'postre'" class="contenedor-productos">
            <div>
              <h1>{{p.nombre}}</h1>
            </div>
            <div>
              <swiper-container navigation="true" pagination="true" loop="true" class="py-2">
                <swiper-slide>
                  <img [src]="p.fotos[0]">
                </swiper-slide>  
                <swiper-slide>
                  <img [src]="p.fotos[1]">
                </swiper-slide> 
                <swiper-slide>
                  <img [src]="p.fotos[2]">
                </swiper-slide> 
              </swiper-container>
            </div>
            <div>
              <h3>${{p.precio}} - Tiempo de elaboracion: {{p.tiempo}} mins</h3>
            </div>
            <div>
              <ion-button (click)="elegirProducto(true, p)"><ion-icon name="add-outline"></ion-icon></ion-button>
              <ion-button (click)="elegirProducto(false, p)"><ion-icon name="remove-outline"></ion-icon></ion-button>
            </div>
          </div>
        </div>
      </div>

      <ion-button (click)="enviarPedido()">ENVIAR PEDIDO</ion-button>
    </div>

    <ion-fab horizontal="end" vertical="bottom" *ngIf="!abrirChat">
      <ion-fab-button (click)="abrirChat = !abrirChat">
        <ion-icon name="chatbubble-ellipses-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </div>

  <div *ngIf="yaPidio">
    <label *ngIf="estadoPedido !== 'entregado'">ESTADO DE SU PEDIDO: {{estadoPedido.toUpperCase()}}</label>
    <ion-button routerLink="/juegos">Juegos</ion-button>
    <ion-button>Encuestas</ion-button>
    <ion-button *ngIf="estadoPedido === 'entregado'" (click)="mostrarDetalle()">PEDIR CUENTA</ion-button>

    <!-- HACER MODAL PARA EL DETALLE DE LA CUENTA -->
    <div *ngIf="mostrarModal">
      <ion-button (click)="pagar()">PAGAR</ion-button>
    </div>
  </div>

  <!-- <div *ngIf="abrirChat" style="height: 100vh;"> -->
    <app-chat *ngIf="abrirChat" [usuario]="cliente"></app-chat>
  <!-- </div> -->
</ion-content>